<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Test pep_SUITE:notify_test result</title>
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rel="stylesheet" href="../../ct_default.css" type="text/css">
<script type="text/javascript" src="../../jquery-latest.js"></script>
<script type="text/javascript" src="../../jquery.tablesorter.min.js"></script>
</head>
<body>

<a name="top"></a><pre>
=== Test case: <a href="pep_suite.src.html#notify_test-1">pep_SUITE:notify_test/1</a> (click for source code)

=== Config value:

    [{everyone_is_friends,true},
     {watchdog,<0.21459.0>},
     {saved_modules,
         [{mod_stream_management,[]},
          {mod_privacy,[]},
          {mod_register,
              [{welcome_message,{[]}},
               {registration_watchers,[<<"admin@localhost">>]},
               {ip_access,[{allow,"127.0.0.0/8"},{deny,"0.0.0.0/0"}]},
               {access,register}]},
          {mod_websockets,[]},
          {mod_roster,[]},
          {mod_muc_log,[{outdir,"/tmp/muclogs"},{access_log,muc}]},
          {mod_disco,[]},
          {mod_auth_token,
              [{{validity_period,access},{60,minutes}},
               {{validity_period,refresh},{1,days}}]},
          {mod_muc,
              [{host,"muc.@HOST@"},{access,muc},{access_create,muc_create}]},
          {mod_bosh,[]},
          {mod_vcard,[]},
          {mod_amp,[]},
          {mod_carboncopy,[]},
          {mod_admin_extra,[]},
          {mod_keystore,
              [{keys,[{token_secret,ram},{provision_pre_shared,ram}]}]},
          {mod_private,[]},
          {mod_http_notification,
              [{worker_timeout,500},{host,"http://localhost:8000"}]},
          {mod_adhoc,[]},
          {mod_offline,[{access_max_user_messages,max_user_offline_messages}]},
          {mod_last,[]},
          {mod_sic,[]}]},
     {preset,"internal_mnesia"},
     {tc_logfile,
         "/home/travis/build/esl/MongooseIM/test/ejabberd_tests/ct_report/ct_run.test@testing-gce-55703a88-2728-4257-92e1-e89ff75f51b9.2016-04-13_14.27.31/ejabberd_tests.tests.pep_SUITE.logs/run.2016-04-13_14.42.43/pep_suite.notify_test.html"},
     {tc_group_properties,[{name,pep_tests},sequence]},
     {tc_group_path,[]},
     {data_dir,
         "/home/travis/build/esl/MongooseIM/test/ejabberd_tests/tests/pep_SUITE_data/"},
     {priv_dir,
         "/home/travis/build/esl/MongooseIM/test/ejabberd_tests/ct_report/ct_run.test@testing-gce-55703a88-2728-4257-92e1-e89ff75f51b9.2016-04-13_14.27.31/ejabberd_tests.tests.pep_SUITE.logs/run.2016-04-13_14.42.43/log_private/"}]

=== Current directory is "/home/travis/build/esl/MongooseIM/test/ejabberd_tests/ct_report/ct_run.test@testing-gce-55703a88-2728-4257-92e1-e89ff75f51b9.2016-04-13_14.27.31"

=== Started at 2016-04-13 14:42:46

<br />

<div class="stanza_log"><b>*** User 2016-04-13 14:42:46.514 ***</b>
alice@localhost/res1 out
&lt;presence/&gt;&#xA;
</div>

<div class="stanza_log"><b>*** User 2016-04-13 14:42:46.593 ***</b>
alice@localhost/res1 in
&lt;presence from=&apos;alice@localhost/res1&apos; to=&apos;alice@localhost/res1&apos; xml:lang=&apos;en&apos;/&gt;&#xA;
</div>

<div class="stanza_log"><b>*** User 2016-04-13 14:42:46.770 ***</b>
bob@localhost/res1 out
&lt;presence&gt;&#xA;  &lt;c xmlns=&apos;http://jabber.org/protocol/caps&apos; hash=&apos;sha-1&apos; node=&apos;http://www.chatopus.com&apos; ver=&apos;+XtEyyuYqe1dzskS+JMkYABKv2U=&apos;/&gt;&#xA;&lt;/presence&gt;&#xA;
</div>

<div class="stanza_log"><b>*** User 2016-04-13 14:42:46.849 ***</b>
bob@localhost/res1 in
&lt;presence from=&apos;bob@localhost/res1&apos; to=&apos;bob@localhost/res1&apos; xml:lang=&apos;en&apos;&gt;&#xA;  &lt;c xmlns=&apos;http://jabber.org/protocol/caps&apos; hash=&apos;sha-1&apos; node=&apos;http://www.chatopus.com&apos; ver=&apos;+XtEyyuYqe1dzskS+JMkYABKv2U=&apos;/&gt;&#xA;&lt;/presence&gt;&#xA;
</div>

<div class="stanza_log"><b>*** User 2016-04-13 14:42:46.851 ***</b>
bob@localhost/res1 in
&lt;presence from=&apos;alice@localhost/res1&apos; to=&apos;bob@localhost/res1&apos; xml:lang=&apos;en&apos;&gt;&#xA;  &lt;delay xmlns=&apos;urn:xmpp:delay&apos; from=&apos;alice@localhost/res1&apos; stamp=&apos;2016-04-13T14:42:46Z&apos;/&gt;&#xA;&lt;/presence&gt;&#xA;
</div>

<div class="stanza_log"><b>*** User 2016-04-13 14:42:46.851 ***</b>
alice@localhost/res1 in
&lt;presence from=&apos;bob@localhost/res1&apos; to=&apos;alice@localhost/res1&apos; xml:lang=&apos;en&apos;&gt;&#xA;  &lt;c xmlns=&apos;http://jabber.org/protocol/caps&apos; hash=&apos;sha-1&apos; node=&apos;http://www.chatopus.com&apos; ver=&apos;+XtEyyuYqe1dzskS+JMkYABKv2U=&apos;/&gt;&#xA;&lt;/presence&gt;&#xA;
</div>

<div class="error_logger"><b>*** System report during pep_SUITE:notify_test/1 in pep_tests 2016-04-13 14:42:46.852 ***</b>

=INFO REPORT==== 13-Apr-2016::14:42:46 ===
following stanzas shouldn't be there:
  * <message from='alice@localhost' to='bob@localhost/res1' type='headline'><event xmlns='http://jabber.org/protocol/pubsub#event'><items type='headline' node='http://jabber.org/protocol/tune'><item id='item1'><entry xmlns='http://www.w3.org/2005/Atom'/></item></items></event><delay xmlns='urn:xmpp:delay' from='alice@localhost/res1' stamp='2016-04-13T14:42:46Z'/></message>

</div>
<div class="ct_internal"><b>*** CT 2016-04-13 14:42:46.853 *** history.xml</b>
<a href="log_private/notify_test.xml" type=[]>notify_test.xml</a>

</div>

<div class="ct_error_notify"><b>*** CT Error Notification 2016-04-13 14:42:47.256 ***</b>
lists:foreach failed on line 1337
Reason: {test_case_failed,{has_stanzas_but_shouldnt,
                   {client,<<"bob@localhost/res1">>,escalus_tcp,
                    #Port<0.35088>,false,false,<0.21490.0>,
                    [{event_manager,<0.21488.0>},
                     {server,<<"localhost">>},
                     {username,<<"bob">>},
                     {resource,<<"res1">>}]},
                   [{xmlel,<<"message">>,
                     [{<<"from">>,<<"alice@localhost">>},
                      {<<"to">>,<<"bob@localhost/res1">>},
                      {<<"type">>,<<"headline">>}],
                     [{xmlel,<<"event">>,
                       [{<<"xmlns">>,
                         <<"http://jabber.org/protocol/pubsub#event">>}],
                       [{xmlel,<<"items">>,
                         [{<<"type">>,<<"headline">>},
                          {<<"node">>,<<"http://jabber.org/protocol/tune">>}],
                         [{xmlel,<<"item">>,
                           [{<<"id">>,<<"item1">>}],
                           [{xmlel,<<"entry">>,
                             [{<<"xmlns">>,<<"http://www.w3.org/2005/Atom">>}],
                             []}]}]}]},
                      {xmlel,<<"delay">>,
                       [{<<"xmlns">>,<<"urn:xmpp:delay">>},
                        {<<"from">>,<<"alice@localhost/res1">>},
                        {<<"stamp">>,<<"2016-04-13T14:42:46Z">>}],
                       []}]}]}}

<a href="#end">Full error description and stacktrace</a>
</div>
<a name="end"></a>


=== Ended at 2016-04-13 14:42:47
=== Location: [{lists,foreach,1337},
              {escalus_story,start_ready_clients,107},
              {escalus_story,story,37},
              {test_server,ts_tc,1408},
              {test_server,run_test_case_eval1,984},
              {test_server,run_test_case_eval,926}]
=== Reason: {test_case_failed,
                  {has_stanzas_but_shouldnt,
                   {client,<<"bob@localhost/res1">>,escalus_tcp,
                    #Port<0.35088>,false,false,<0.21490.0>,
                    [{event_manager,<0.21488.0>},
                     {server,<<"localhost">>},
                     {username,<<"bob">>},
                     {resource,<<"res1">>}]},
                   [{xmlel,<<"message">>,
                     [{<<"from">>,<<"alice@localhost">>},
                      {<<"to">>,<<"bob@localhost/res1">>},
                      {<<"type">>,<<"headline">>}],
                     [{xmlel,<<"event">>,
                       [{<<"xmlns">>,
                         <<"http://jabber.org/protocol/pubsub#event">>}],
                       [{xmlel,<<"items">>,
                         [{<<"type">>,<<"headline">>},
                          {<<"node">>,<<"http://jabber.org/protocol/tune">>}],
                         [{xmlel,<<"item">>,
                           [{<<"id">>,<<"item1">>}],
                           [{xmlel,<<"entry">>,
                             [{<<"xmlns">>,<<"http://www.w3.org/2005/Atom">>}],
                             []}]}]}]},
                      {xmlel,<<"delay">>,
                       [{<<"xmlns">>,<<"urn:xmpp:delay">>},
                        {<<"from">>,<<"alice@localhost/res1">>},
                        {<<"stamp">>,<<"2016-04-13T14:42:46Z">>}],
                       []}]}]}}
=== 
*** notify_test failed.
    Skipping all other cases in sequence.
</pre>
<center>
<br /><hr /><p>
<a href="../../../all_runs.html">Test run history
</a>  |  <a href="../../../index.html">Top level test index
</a>
</p>
<div class="copyright">Copyright &copy; 2016 <a href="http://www.erlang.org">Open Telecom Platform</a><br />
Updated: <!date>Wed Apr 13 2016 14:42:46<!/date><br />
</div>
</center>
</body>
</html>
