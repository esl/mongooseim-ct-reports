<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Test metrics_api_SUITE:message_flow result</title>
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link rel="stylesheet" href="../../ct_default.css" type="text/css">
<script type="text/javascript" src="../../jquery-latest.js"></script>
<script type="text/javascript" src="../../jquery.tablesorter.min.js"></script>
</head>
<body>

<a name="top"></a><pre>
=== Test case: <a href="metrics_api_suite.src.html#message_flow-1">metrics_api_SUITE:message_flow/1</a> (click for source code)

=== Config value:

    [{watchdog,<0.22557.0>},
     {apps_started,[katt,lhttpc,mochijson3,xmerl]},
     {running,[{mod_offline,[{backend,riak}]}]},
     {preset,"riak_mnesia"},
     {tc_logfile,"/home/travis/build/esl/MongooseIM/test/ejabberd_tests/ct_report/ct_run.test@testing-gce-ef84ad86-72e7-4bfb-94bd-f798f227b27c.2016-04-13_09.20.36/ejabberd_tests.tests.metrics_api_SUITE.logs/run.2016-04-13_09.33.10/metrics_api_suite.message_flow.html"},
     {tc_group_properties,[{name,metrics}]},
     {tc_group_path,[]},
     {data_dir,"/home/travis/build/esl/MongooseIM/test/ejabberd_tests/tests/metrics_api_SUITE_data/"},
     {priv_dir,"/home/travis/build/esl/MongooseIM/test/ejabberd_tests/ct_report/ct_run.test@testing-gce-ef84ad86-72e7-4bfb-94bd-f798f227b27c.2016-04-13_09.20.36/ejabberd_tests.tests.metrics_api_SUITE.logs/run.2016-04-13_09.33.10/log_private/"},
     {escalus_users,[{alice,[{username,<<"alicE">>},
                             {server,<<"localhost">>},
                             {password,<<"matygrysa">>}]},
                     {bob,[{username,<<"bOb">>},
                           {server,<<"localhost">>},
                           {password,<<"makrolika">>}]}]}]

=== Current directory is "/home/travis/build/esl/MongooseIM/test/ejabberd_tests/ct_report/ct_run.test@testing-gce-ef84ad86-72e7-4bfb-94bd-f798f227b27c.2016-04-13_09.20.36"

=== Started at 2016-04-13 09:33:10

<br />
<a name="end"></a>


=== Ended at 2016-04-13 09:33:10
=== successfully completed test case
=== returned value = {pass,
                      "/home/travis/build/esl/MongooseIM/test/ejabberd_tests/tests/metrics_api_SUITE_data/metrics.apib",
                      [{"hostname","localhost"},
                       {"port",5288},
                       {"protocol","http:"},
                       {"request_timeout",20000},
                       {"scenario_timeout",120000}],
                      [{"example_global","nodeSessionCount"},
                       {"example_host","localhost"},
                       {"example_metric","adhoc_local_commands"},
                       {"hostname","localhost"},
                       {"port",5288},
                       {"protocol","http:"},
                       {"request_timeout",20000},
                       {"scenario_timeout",120000}],
                      [{<<"# 0. GET is the only implemented allowed method\n#    (both OPTIONS and HEAD are for free then)\n">>,
                        [{"hostname","localhost"},
                         {"port",5288},
                         {"protocol","http:"},
                         {"request_timeout",20000},
                         {"scenario_timeout",120000}],
                        {katt_request,"OPTIONS",
                         "http://localhost:5288/api/metrics/",
                         [{"User-Agent","katt"},{"Host","localhost:5288"}],
                         null},
                        {katt_response,200,
                         [{"Allow","OPTIONS, HEAD, GET"},
                          {"Content-Length","0"},
                          {"Date","Wed, 13 Apr 2016 09:33:10 GMT"},
                          {"Server","Cowboy"}],
                         <<>>,<<>>},
                        pass},
                       {<<"# 1. List of hosts and metrics\n">>,
                        [{"hostname","localhost"},
                         {"port",5288},
                         {"protocol","http:"},
                         {"request_timeout",20000},
                         {"scenario_timeout",120000}],
                        {katt_request,"GET",
                         "http://localhost:5288/api/metrics/",
                         [{"Accept","application/json"},
                          {"User-Agent","katt"},
                          {"Host","localhost:5288"}],
                         null},
                        {katt_response,200,
                         [{"Vary","accept"},
                          {"Content-Type","application/json"},
                          {"Content-Length","2202"},
                          {"Date","Wed, 13 Apr 2016 09:33:10 GMT"},
                          {"Server","Cowboy"}],
                         <<"{\"hosts\":[\"localhost\",\"anonymous.localhost\",\"localhost.bis\"],\"metrics\":[\"adhoc_local_commands\",\"adhoc_local_items\",\"amp_check_condition\",\"amp_check_packet\",\"amp_determine_strategy\",\"amp_verify_support\",\"anonymous_purge_hook\",\"c2s_stream_features\",\"c2s_unauthenticated_iq\",\"disco_info\",\"disco_local_features\",\"disco_local_identity\",\"disco_local_items\",\"disco_sm_features\",\"disco_sm_identity\",\"disco_sm_items\",\"filter_local_packet\",\"get_key\",\"host_config_update\",\"local_send_to_resource_hook\",\"mam_archive_size\",\"mam_get_behaviour\",\"mam_lookup_messages\",\"mam_muc_archive_size\",\"mam_muc_get_behaviour\",\"mam_muc_purge_multiple_message\",\"mam_purge_multiple_message\",\"modCSIActive\",\"modCSIInactive\",\"modMamArchiveRemoved\",\"modMamArchived\",\"modMamDropped\",\"modMamDropped2\",\"modMamDroppedIQ\",\"modMamFlushed\",\"modMamForwarded\",\"modMamLookups\",\"modMamMultiplePurges\",\"modMamPrefsGets\",\"modMamPrefsSets\",\"modMamSinglePurges\",\"modMucMamArchiveRemoved\",\"modMucMamArchived\",\"modMucMamForwarded\",\"modMucMamLookups\",\"modMucMamMultiplePurges\",\"modMucMamPrefsGets\",\"modMucMamPrefsSets\",\"modMucMamSinglePurges\",\"modPresenceSubscriptions\",\"modPresenceUnsubscriptions\",\"modPrivacyGets\",\"modPrivacyPush\",\"modPrivacySets\",\"modPrivacySetsActive\",\"modPrivacySetsDefault\",\"modPrivacyStanzaAll\",\"modPrivacyStanzaBlocked\",\"modRegisterCount\",\"modRosterGets\",\"modRosterPush\",\"modRosterSets\",\"modUnregisterCount\",\"offline_message_hook\",\"privacy_get_user_list\",\"privacy_updated_list\",\"resend_offline_messages_hook\",\"roster_get_jid_info\",\"roster_get_subscription_lists\",\"roster_get_versioning_feature\",\"roster_in_subscription\",\"roster_out_subscription\",\"sessionAuthAnonymous\",\"sessionAuthFails\",\"sessionCount\",\"sessionLogouts\",\"sessionSuccessfulLogins\",\"session_cleanup\",\"set_vcard\",\"sm_broadcast\",\"unset_presence_hook\",\"user_ping_timeout\",\"xmppErrorIq\",\"xmppErrorMessage\",\"xmppErrorPresence\",\"xmppErrorTotal\",\"xmppIqReceived\",\"xmppIqSent\",\"xmppMessageBounced\",\"xmppMessageReceived\",\"xmppMessageSent\",\"xmppPresenceReceived\",\"xmppPresenceSent\",\"xmppStanzaCount\",\"xmppStanzaDropped\",\"xmppStanzaReceived\",\"xmppStanzaSent\"],\"global\":[\"nodeSessionCount\",\"nodeUpTime\",\"node_cleanup\",\"routingErrors\",\"totalSessionCount\",\"uniqueSessionCount\"]}">>,
                         {struct,
                          [{"global",
                            {array,
                             [{"0","nodeSessionCount"},
                              {"1","nodeUpTime"},
                              {"2","node_cleanup"},
                              {"3","routingErrors"},
                              {"4","totalSessionCount"},
                              {"5","uniqueSessionCount"}]}},
                           {"hosts",
                            {array,
                             [{"0","localhost"},
                              {"1","anonymous.localhost"},
                              {"2","localhost.bis"}]}},
                           {"metrics",
                            {array,
                             [{"0","adhoc_local_commands"},
                              {"1","adhoc_local_items"},
                              {"2","amp_check_condition"},
                              {"3","amp_check_packet"},
                              {"4","amp_determine_strategy"},
                              {"5","amp_verify_support"},
                              {"6","anonymous_purge_hook"},
                              {"7","c2s_stream_features"},
                              {"8","c2s_unauthenticated_iq"},
                              {"9","disco_info"},
                              {"10","disco_local_features"},
                              {"11","disco_local_identity"},
                              {"12","disco_local_items"},
                              {"13","disco_sm_features"},
                              {"14","disco_sm_identity"},
                              {"15","disco_sm_items"},
                              {"16","filter_local_packet"},
                              {"17","get_key"},
                              {"18","host_config_update"},
                              {"19","local_send_to_resource_hook"},
                              {"20","mam_archive_size"},
                              {"21","mam_get_behaviour"},
                              {"22","mam_lookup_messages"},
                              {"23","mam_muc_archive_size"},
                              {"24","mam_muc_get_behaviour"},
                              {"25","mam_muc_purge_multiple_message"},
                              {"26","mam_purge_multiple_message"},
                              {"27","modCSIActive"},
                              {"28","modCSIInactive"},
                              {"29","modMamArchiveRemoved"},
                              {"30","modMamArchived"},
                              {"31","modMamDropped"},
                              {"32","modMamDropped2"},
                              {"33","modMamDroppedIQ"},
                              {"34","modMamFlushed"},
                              {"35","modMamForwarded"},
                              {"36","modMamLookups"},
                              {"37","modMamMultiplePurges"},
                              {"38","modMamPrefsGets"},
                              {"39","modMamPrefsSets"},
                              {"40","modMamSinglePurges"},
                              {"41","modMucMamArchiveRemoved"},
                              {"42","modMucMamArchived"},
                              {"43","modMucMamForwarded"},
                              {"44","modMucMamLookups"},
                              {"45","modMucMamMultiplePurges"},
                              {"46","modMucMamPrefsGets"},
                              {"47","modMucMamPrefsSets"},
                              {"48","modMucMamSinglePurges"},
                              {"49","modPresenceSubscriptions"},
                              {"50","modPresenceUnsubscriptions"},
                              {"51","modPrivacyGets"},
                              {"52","modPrivacyPush"},
                              {"53","modPrivacySets"},
                              {"54","modPrivacySetsActive"},
                              {"55","modPrivacySetsDefault"},
                              {"56","modPrivacyStanzaAll"},
                              {"57","modPrivacyStanzaBlocked"},
                              {"58","modRegisterCount"},
                              {"59","modRosterGets"},
                              {"60","modRosterPush"},
                              {"61","modRosterSets"},
                              {"62","modUnregisterCount"},
                              {"63","offline_message_hook"},
                              {"64","privacy_get_user_list"},
                              {"65","privacy_updated_list"},
                              {"66","resend_offline_messages_hook"},
                              {"67","roster_get_jid_info"},
                              {"68","roster_get_subscription_lists"},
                              {"69","roster_get_versioning_feature"},
                              {"70","roster_in_subscription"},
                              {"71","roster_out_subscription"},
                              {"72","sessionAuthAnonymous"},
                              {"73","sessionAuthFails"},
                              {"74","sessionCount"},
                              {"75","sessionLogouts"},
                              {"76","sessionSuccessfulLogins"},
                              {"77","session_cleanup"},
                              {"78","set_vcard"},
                              {"79","sm_broadcast"},
                              {"80","unset_presence_hook"},
                              {"81","user_ping_timeout"},
                              {"82","xmppErrorIq"},
                              {"83","xmppErrorMessage"},
                              {"84","xmppErrorPresence"},
                              {"85","xmppErrorTotal"},
                              {"86","xmppIqReceived"},
                              {"87","xmppIqSent"},
                              {"88","xmppMessageBounced"},
                              {"89","xmppMessageReceived"},
                              {"90","xmppMessageSent"},
                              {"91","xmppPresenceReceived"},
                              {"92","xmppPresenceSent"},
                              {"93","xmppStanzaCount"},
                              {"94","xmppStanzaDropped"},
                              {"95","xmppStanzaReceived"},
                              {"96","xmppStanzaSent"}]}}]}},
                        pass},
                       {<<"# 2. Sum of all metrics\n">>,
                        [{"example_global","nodeSessionCount"},
                         {"example_host","localhost"},
                         {"example_metric","adhoc_local_commands"},
                         {"hostname","localhost"},
                         {"port",5288},
                         {"protocol","http:"},
                         {"request_timeout",20000},
                         {"scenario_timeout",120000}],
                        {katt_request,"GET",
                         "http://localhost:5288/api/metrics/all",
                         [{"Accept","application/json"},
                          {"User-Agent","katt"},
                          {"Host","localhost:5288"}],
                         null},
                        {katt_response,200,
                         [{"Vary","accept"},
                          {"Content-Type","application/json"},
                          {"Content-Length","4088"},
                          {"Date","Wed, 13 Apr 2016 09:33:10 GMT"},
                          {"Server","Cowboy"}],
                         <<"{\"metrics\":{\"adhoc_local_commands\":{\"count\":0,\"one\":0},\"adhoc_local_items\":{\"count\":0,\"one\":0},\"amp_check_condition\":{\"count\":0,\"one\":0},\"amp_check_packet\":{\"count\":816,\"one\":384},\"amp_determine_strategy\":{\"count\":0,\"one\":0},\"amp_verify_support\":{\"count\":0,\"one\":0},\"anonymous_purge_hook\":{\"count\":0,\"one\":0},\"c2s_stream_features\":{\"count\":589,\"one\":91},\"c2s_unauthenticated_iq\":{\"count\":142,\"one\":25},\"disco_info\":{\"count\":3,\"one\":0},\"disco_local_features\":{\"count\":3,\"one\":0},\"disco_local_identity\":{\"count\":3,\"one\":0},\"disco_local_items\":{\"count\":5,\"one\":0},\"disco_sm_features\":{\"count\":0,\"one\":0},\"disco_sm_identity\":{\"count\":0,\"one\":0},\"disco_sm_items\":{\"count\":0,\"one\":0},\"filter_local_packet\":{\"count\":1443,\"one\":619},\"get_key\":{\"count\":0,\"one\":0},\"host_config_update\":{\"count\":0,\"one\":0},\"local_send_to_resource_hook\":{\"count\":0,\"one\":0},\"mam_archive_size\":{\"count\":536,\"one\":307},\"mam_get_behaviour\":{\"count\":720,\"one\":524},\"mam_lookup_messages\":{\"count\":28,\"one\":14},\"mam_muc_archive_size\":{\"count\":15,\"one\":3},\"mam_muc_get_behaviour\":{\"count\":69,\"one\":45},\"mam_muc_purge_multiple_message\":{\"count\":0,\"one\":0},\"mam_purge_multiple_message\":{\"count\":0,\"one\":0},\"modCSIActive\":{\"count\":0,\"one\":0},\"modCSIInactive\":{\"count\":0,\"one\":0},\"modMamArchiveRemoved\":{\"count\":377,\"one\":223},\"modMamArchived\":{\"count\":1044,\"one\":644},\"modMamDropped\":{\"count\":1385,\"one\":689},\"modMamDropped2\":{\"count\":0,\"one\":0},\"modMamDroppedIQ\":{\"count\":28,\"one\":14},\"modMamFlushed\":{\"count\":0,\"one\":0},\"modMamForwarded\":{\"count\":0,\"one\":0},\"modMamLookups\":{\"count\":0,\"one\":0},\"modMamMultiplePurges\":{\"count\":0,\"one\":0},\"modMamPrefsGets\":{\"count\":21,\"one\":21},\"modMamPrefsSets\":{\"count\":42,\"one\":42},\"modMamSinglePurges\":{\"count\":0,\"one\":0},\"modMucMamArchiveRemoved\":{\"count\":91,\"one\":3},\"modMucMamArchived\":{\"count\":341,\"one\":45},\"modMucMamForwarded\":{\"count\":0,\"one\":0},\"modMucMamLookups\":{\"count\":0,\"one\":0},\"modMucMamMultiplePurges\":{\"count\":0,\"one\":0},\"modMucMamPrefsGets\":{\"count\":0,\"one\":0},\"modMucMamPrefsSets\":{\"count\":0,\"one\":0},\"modMucMamSinglePurges\":{\"count\":0,\"one\":0},\"modPresenceSubscriptions\":{\"count\":4,\"one\":2},\"modPresenceUnsubscriptions\":{\"count\":21,\"one\":1},\"modPrivacyGets\":{\"count\":0,\"one\":0},\"modPrivacyPush\":{\"count\":21,\"one\":7},\"modPrivacySets\":{\"count\":0,\"one\":0},\"modPrivacySetsActive\":{\"count\":0,\"one\":0},\"modPrivacySetsDefault\":{\"count\":0,\"one\":0},\"modPrivacyStanzaAll\":{\"count\":2533,\"one\":929},\"modPrivacyStanzaBlocked\":{\"count\":0,\"one\":0},\"modRegisterCount\":{\"count\":72,\"one\":14},\"modRosterGets\":{\"count\":7,\"one\":0},\"modRosterPush\":{\"count\":21,\"one\":7},\"modRosterSets\":{\"count\":5,\"one\":0},\"modUnregisterCount\":{\"count\":77,\"one\":15},\"offline_message_hook\":{\"count\":1,\"one\":1},\"privacy_get_user_list\":{\"count\":293,\"one\":42},\"privacy_updated_list\":{\"count\":0,\"one\":0},\"resend_offline_messages_hook\":{\"count\":208,\"one\":34},\"roster_get_jid_info\":{\"count\":43,\"one\":40},\"roster_get_subscription_lists\":{\"count\":445,\"one\":68},\"roster_get_versioning_feature\":{\"count\":238,\"one\":34},\"roster_in_subscription\":{\"count\":52,\"one\":7},\"roster_out_subscription\":{\"count\":8,\"one\":4},\"sessionAuthAnonymous\":{\"count\":0,\"one\":0},\"sessionAuthFails\":{\"count\":6,\"one\":0},\"sessionCount\":{\"value\":0},\"sessionLogouts\":{\"count\":237,\"one\":36},\"sessionSuccessfulLogins\":{\"count\":237,\"one\":34},\"session_cleanup\":{\"count\":0,\"one\":0},\"set_vcard\":{\"count\":0,\"one\":0},\"sm_broadcast\":{\"count\":122,\"one\":24},\"unset_presence_hook\":{\"count\":209,\"one\":36},\"user_ping_timeout\":{\"count\":0,\"one\":0},\"xmppErrorIq\":{\"count\":73,\"one\":17},\"xmppErrorMessage\":{\"count\":4,\"one\":0},\"xmppErrorPresence\":{\"count\":8,\"one\":0},\"xmppErrorTotal\":{\"count\":85,\"one\":17},\"xmppIqReceived\":{\"count\":207,\"one\":87},\"xmppIqSent\":{\"count\":181,\"one\":80},\"xmppMessageBounced\":{\"count\":0,\"one\":0},\"xmppMessageReceived\":{\"count\":484,\"one\":311},\"xmppMessageSent\":{\"count\":340,\"one\":260},\"xmppPresenceReceived\":{\"count\":448,\"one\":56},\"xmppPresenceSent\":{\"count\":295,\"one\":44},\"xmppStanzaCount\":{\"count\":2596,\"one\":672},\"xmppStanzaDropped\":{\"count\":0,\"one\":0},\"xmppStanzaReceived\":{\"count\":1139,\"one\":454},\"xmppStanzaSent\":{\"count\":816,\"one\":384}}}">>,
                         {struct,
                          [{"metrics",
                            {struct,
                             [{"adhoc_local_commands",
                               {struct,[{"count",0},{"one",0}]}},
                              {"adhoc_local_items",
                               {struct,[{"count",0},{"one",0}]}},
                              {"amp_check_condition",
                               {struct,[{"count",0},{"one",0}]}},
                              {"amp_check_packet",
                               {struct,[{"count",816},{"one",384}]}},
                              {"amp_determine_strategy",
                               {struct,[{"count",0},{"one",0}]}},
                              {"amp_verify_support",
                               {struct,[{"count",0},{"one",0}]}},
                              {"anonymous_purge_hook",
                               {struct,[{"count",0},{"one",0}]}},
                              {"c2s_stream_features",
                               {struct,[{"count",589},{"one",91}]}},
                              {"c2s_unauthenticated_iq",
                               {struct,[{"count",142},{"one",25}]}},
                              {"disco_info",{struct,[{"count",3},{"one",0}]}},
                              {"disco_local_features",
                               {struct,[{"count",3},{"one",0}]}},
                              {"disco_local_identity",
                               {struct,[{"count",3},{"one",0}]}},
                              {"disco_local_items",
                               {struct,[{"count",5},{"one",0}]}},
                              {"disco_sm_features",
                               {struct,[{"count",0},{"one",0}]}},
                              {"disco_sm_identity",
                               {struct,[{"count",0},{"one",0}]}},
                              {"disco_sm_items",
                               {struct,[{"count",0},{"one",0}]}},
                              {"filter_local_packet",
                               {struct,[{"count",1443},{"one",619}]}},
                              {"get_key",{struct,[{"count",0},{"one",0}]}},
                              {"host_config_update",
                               {struct,[{"count",0},{"one",0}]}},
                              {"local_send_to_resource_hook",
                               {struct,[{"count",0},{"one",0}]}},
                              {"mam_archive_size",
                               {struct,[{"count",536},{"one",307}]}},
                              {"mam_get_behaviour",
                               {struct,[{"count",720},{"one",524}]}},
                              {"mam_lookup_messages",
                               {struct,[{"count",28},{"one",14}]}},
                              {"mam_muc_archive_size",
                               {struct,[{"count",15},{"one",3}]}},
                              {"mam_muc_get_behaviour",
                               {struct,[{"count",69},{"one",45}]}},
                              {"mam_muc_purge_multiple_message",
                               {struct,[{"count",0},{"one",0}]}},
                              {"mam_purge_multiple_message",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modCSIActive",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modCSIInactive",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMamArchiveRemoved",
                               {struct,[{"count",377},{"one",223}]}},
                              {"modMamArchived",
                               {struct,[{"count",1044},{"one",644}]}},
                              {"modMamDropped",
                               {struct,[{"count",1385},{"one",689}]}},
                              {"modMamDropped2",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMamDroppedIQ",
                               {struct,[{"count",28},{"one",14}]}},
                              {"modMamFlushed",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMamForwarded",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMamLookups",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMamMultiplePurges",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMamPrefsGets",
                               {struct,[{"count",21},{"one",21}]}},
                              {"modMamPrefsSets",
                               {struct,[{"count",42},{"one",42}]}},
                              {"modMamSinglePurges",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMucMamArchiveRemoved",
                               {struct,[{"count",91},{"one",3}]}},
                              {"modMucMamArchived",
                               {struct,[{"count",341},{"one",45}]}},
                              {"modMucMamForwarded",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMucMamLookups",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMucMamMultiplePurges",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMucMamPrefsGets",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMucMamPrefsSets",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMucMamSinglePurges",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modPresenceSubscriptions",
                               {struct,[{"count",4},{"one",2}]}},
                              {"modPresenceUnsubscriptions",
                               {struct,[{"count",21},{"one",1}]}},
                              {"modPrivacyGets",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modPrivacyPush",
                               {struct,[{"count",21},{"one",7}]}},
                              {"modPrivacySets",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modPrivacySetsActive",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modPrivacySetsDefault",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modPrivacyStanzaAll",
                               {struct,[{"count",2533},{"one",929}]}},
                              {"modPrivacyStanzaBlocked",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modRegisterCount",
                               {struct,[{"count",72},{"one",14}]}},
                              {"modRosterGets",
                               {struct,[{"count",7},{"one",0}]}},
                              {"modRosterPush",
                               {struct,[{"count",21},{"one",7}]}},
                              {"modRosterSets",
                               {struct,[{"count",5},{"one",0}]}},
                              {"modUnregisterCount",
                               {struct,[{"count",77},{"one",15}]}},
                              {"offline_message_hook",
                               {struct,[{"count",1},{"one",1}]}},
                              {"privacy_get_user_list",
                               {struct,[{"count",293},{"one",42}]}},
                              {"privacy_updated_list",
                               {struct,[{"count",0},{"one",0}]}},
                              {"resend_offline_messages_hook",
                               {struct,[{"count",208},{"one",34}]}},
                              {"roster_get_jid_info",
                               {struct,[{"count",43},{"one",40}]}},
                              {"roster_get_subscription_lists",
                               {struct,[{"count",445},{"one",68}]}},
                              {"roster_get_versioning_feature",
                               {struct,[{"count",238},{"one",34}]}},
                              {"roster_in_subscription",
                               {struct,[{"count",52},{"one",7}]}},
                              {"roster_out_subscription",
                               {struct,[{"count",8},{"one",4}]}},
                              {"sessionAuthAnonymous",
                               {struct,[{"count",0},{"one",0}]}},
                              {"sessionAuthFails",
                               {struct,[{"count",6},{"one",0}]}},
                              {"sessionCount",{struct,[{"value",0}]}},
                              {"sessionLogouts",
                               {struct,[{"count",237},{"one",36}]}},
                              {"sessionSuccessfulLogins",
                               {struct,[{"count",237},{"one",34}]}},
                              {"session_cleanup",
                               {struct,[{"count",0},{"one",0}]}},
                              {"set_vcard",{struct,[{"count",0},{"one",0}]}},
                              {"sm_broadcast",
                               {struct,[{"count",122},{"one",24}]}},
                              {"unset_presence_hook",
                               {struct,[{"count",209},{"one",36}]}},
                              {"user_ping_timeout",
                               {struct,[{"count",0},{"one",0}]}},
                              {"xmppErrorIq",
                               {struct,[{"count",73},{"one",17}]}},
                              {"xmppErrorMessage",
                               {struct,[{"count",4},{"one",0}]}},
                              {"xmppErrorPresence",
                               {struct,[{"count",8},{"one",0}]}},
                              {"xmppErrorTotal",
                               {struct,[{"count",85},{"one",17}]}},
                              {"xmppIqReceived",
                               {struct,[{"count",207},{"one",87}]}},
                              {"xmppIqSent",
                               {struct,[{"count",181},{"one",80}]}},
                              {"xmppMessageBounced",
                               {struct,[{"count",0},{"one",0}]}},
                              {"xmppMessageReceived",
                               {struct,[{"count",484},{"one",311}]}},
                              {"xmppMessageSent",
                               {struct,[{"count",340},{"one",260}]}},
                              {"xmppPresenceReceived",
                               {struct,[{"count",448},{"one",56}]}},
                              {"xmppPresenceSent",
                               {struct,[{"count",295},{"one",44}]}},
                              {"xmppStanzaCount",
                               {struct,[{"count",2596},{"one",672}]}},
                              {"xmppStanzaDropped",
                               {struct,[{"count",0},{"one",0}]}},
                              {"xmppStanzaReceived",
                               {struct,[{"count",1139},{"one",454}]}},
                              {"xmppStanzaSent",
                               {struct,[{"count",816},{"one",384}]}}]}}]}},
                        pass},
                       {<<"# 3a. Sum for a given metric\n">>,
                        [{"example_global","nodeSessionCount"},
                         {"example_host","localhost"},
                         {"example_metric","adhoc_local_commands"},
                         {"hostname","localhost"},
                         {"port",5288},
                         {"protocol","http:"},
                         {"request_timeout",20000},
                         {"scenario_timeout",120000}],
                        {katt_request,"GET",
                         "http://localhost:5288/api/metrics/all/adhoc_local_commands",
                         [{"Accept","application/json"},
                          {"User-Agent","katt"},
                          {"Host","localhost:5288"}],
                         null},
                        {katt_response,200,
                         [{"Vary","accept"},
                          {"Content-Type","application/json"},
                          {"Content-Length","30"},
                          {"Date","Wed, 13 Apr 2016 09:33:10 GMT"},
                          {"Server","Cowboy"}],
                         <<"{\"metric\":{\"count\":0,\"one\":0}}">>,
                         {struct,
                          [{"metric",{struct,[{"count",0},{"one",0}]}}]}},
                        pass},
                       {<<"# 3b. Negative case for a non-existent given metric\n">>,
                        [{"example_global","nodeSessionCount"},
                         {"example_host","localhost"},
                         {"example_metric","adhoc_local_commands"},
                         {"hostname","localhost"},
                         {"port",5288},
                         {"protocol","http:"},
                         {"request_timeout",20000},
                         {"scenario_timeout",120000}],
                        {katt_request,"GET",
                         "http://localhost:5288/api/metrics/all/nonExistentMetric",
                         [{"Accept","application/json"},
                          {"User-Agent","katt"},
                          {"Host","localhost:5288"}],
                         null},
                        {katt_response,404,
                         [{"Vary","accept"},
                          {"Content-Type","application/json"},
                          {"Content-Length","0"},
                          {"Date","Wed, 13 Apr 2016 09:33:10 GMT"},
                          {"Server","Cowboy"}],
                         <<>>,[]},
                        pass},
                       {<<"# 4a. All metrics for an example host\n">>,
                        [{"example_global","nodeSessionCount"},
                         {"example_host","localhost"},
                         {"example_metric","adhoc_local_commands"},
                         {"hostname","localhost"},
                         {"port",5288},
                         {"protocol","http:"},
                         {"request_timeout",20000},
                         {"scenario_timeout",120000}],
                        {katt_request,"GET",
                         "http://localhost:5288/api/metrics/host/localhost",
                         [{"Accept","application/json"},
                          {"User-Agent","katt"},
                          {"Host","localhost:5288"}],
                         null},
                        {katt_response,200,
                         [{"Vary","accept"},
                          {"Content-Type","application/json"},
                          {"Content-Length","4387"},
                          {"Date","Wed, 13 Apr 2016 09:33:10 GMT"},
                          {"Server","Cowboy"}],
                         <<"{\"metrics\":{\"adhoc_local_commands\":{\"count\":0,\"one\":0},\"adhoc_local_items\":{\"count\":0,\"one\":0},\"amp_check_condition\":{\"count\":0,\"one\":0},\"amp_check_packet\":{\"count\":816,\"one\":384},\"amp_determine_strategy\":{\"count\":0,\"one\":0},\"amp_verify_support\":{\"count\":0,\"one\":0},\"anonymous_purge_hook\":{\"count\":0,\"one\":0},\"c2s_stream_features\":{\"count\":589,\"one\":91},\"c2s_unauthenticated_iq\":{\"count\":142,\"one\":25},\"disco_info\":{\"count\":3,\"one\":0},\"disco_local_features\":{\"count\":3,\"one\":0},\"disco_local_identity\":{\"count\":3,\"one\":0},\"disco_local_items\":{\"count\":5,\"one\":0},\"disco_sm_features\":{\"count\":0,\"one\":0},\"disco_sm_identity\":{\"count\":0,\"one\":0},\"disco_sm_items\":{\"count\":0,\"one\":0},\"filter_local_packet\":{\"count\":1443,\"one\":619},\"get_key\":{\"count\":0,\"one\":0},\"host_config_update\":{\"count\":0,\"one\":0},\"local_send_to_resource_hook\":{\"count\":0,\"one\":0},\"mam_archive_size\":{\"count\":536,\"one\":307},\"mam_get_behaviour\":{\"count\":720,\"one\":524},\"mam_lookup_messages\":{\"count\":28,\"one\":14},\"mam_muc_archive_size\":{\"count\":15,\"one\":3},\"mam_muc_get_behaviour\":{\"count\":69,\"one\":45},\"mam_muc_purge_multiple_message\":{\"count\":0,\"one\":0},\"mam_purge_multiple_message\":{\"count\":0,\"one\":0},\"modCSIActive\":{\"count\":0,\"one\":0},\"modCSIInactive\":{\"count\":0,\"one\":0},\"modMamArchiveRemoved\":{\"count\":377,\"one\":223},\"modMamArchived\":{\"count\":1044,\"one\":644},\"modMamDropped\":{\"count\":1385,\"one\":689},\"modMamDropped2\":{\"count\":0,\"one\":0},\"modMamDroppedIQ\":{\"count\":28,\"one\":14},\"modMamFlushed\":{\"count\":0,\"one\":0},\"modMamForwarded\":{\"count\":0,\"one\":0},\"modMamLookups\":{\"count\":0,\"one\":0},\"modMamLookups_simple\":{\"count\":0,\"one\":0},\"modMamMultiplePurges\":{\"count\":0,\"one\":0},\"modMamPrefsGets\":{\"count\":21,\"one\":21},\"modMamPrefsSets\":{\"count\":42,\"one\":42},\"modMamSinglePurges\":{\"count\":0,\"one\":0},\"modMucMamArchiveRemoved\":{\"count\":91,\"one\":3},\"modMucMamArchived\":{\"count\":341,\"one\":45},\"modMucMamForwarded\":{\"count\":0,\"one\":0},\"modMucMamLookups\":{\"count\":0,\"one\":0},\"modMucMamMultiplePurges\":{\"count\":0,\"one\":0},\"modMucMamPrefsGets\":{\"count\":0,\"one\":0},\"modMucMamPrefsSets\":{\"count\":0,\"one\":0},\"modMucMamSinglePurges\":{\"count\":0,\"one\":0},\"modPresenceSubscriptions\":{\"count\":4,\"one\":2},\"modPresenceUnsubscriptions\":{\"count\":21,\"one\":1},\"modPrivacyGets\":{\"count\":0,\"one\":0},\"modPrivacyPush\":{\"count\":21,\"one\":7},\"modPrivacySets\":{\"count\":0,\"one\":0},\"modPrivacySetsActive\":{\"count\":0,\"one\":0},\"modPrivacySetsDefault\":{\"count\":0,\"one\":0},\"modPrivacyStanzaAll\":{\"count\":2533,\"one\":929},\"modPrivacyStanzaBlocked\":{\"count\":0,\"one\":0},\"modRegisterCount\":{\"count\":71,\"one\":14},\"modRosterGets\":{\"count\":7,\"one\":0},\"modRosterPush\":{\"count\":21,\"one\":7},\"modRosterSets\":{\"count\":5,\"one\":0},\"modUnregisterCount\":{\"count\":76,\"one\":15},\"mod_http_notifications_failed\":{\"count\":267,\"one\":215},\"mod_http_notifications_response_time\":{\"n\":0,\"mean\":0,\"min\":0,\"max\":0,\"median\":0,\"50\":0,\"75\":0,\"90\":0,\"95\":0,\"99\":0,\"999\":0},\"mod_http_notifications_sent\":{\"count\":0,\"one\":0},\"offline_message_hook\":{\"count\":1,\"one\":1},\"privacy_get_user_list\":{\"count\":293,\"one\":42},\"privacy_updated_list\":{\"count\":0,\"one\":0},\"resend_offline_messages_hook\":{\"count\":208,\"one\":34},\"roster_get_jid_info\":{\"count\":43,\"one\":40},\"roster_get_subscription_lists\":{\"count\":445,\"one\":68},\"roster_get_versioning_feature\":{\"count\":238,\"one\":34},\"roster_in_subscription\":{\"count\":52,\"one\":7},\"roster_out_subscription\":{\"count\":8,\"one\":4},\"sessionAuthAnonymous\":{\"count\":0,\"one\":0},\"sessionAuthFails\":{\"count\":6,\"one\":0},\"sessionCount\":{\"value\":0,\"ms_since_reset\":282121},\"sessionLogouts\":{\"count\":237,\"one\":36},\"sessionSuccessfulLogins\":{\"count\":237,\"one\":34},\"session_cleanup\":{\"count\":0,\"one\":0},\"set_vcard\":{\"count\":0,\"one\":0},\"sm_broadcast\":{\"count\":121,\"one\":24},\"unset_presence_hook\":{\"count\":209,\"one\":36},\"user_ping_timeout\":{\"count\":0,\"one\":0},\"xmppErrorIq\":{\"count\":73,\"one\":17},\"xmppErrorMessage\":{\"count\":4,\"one\":0},\"xmppErrorPresence\":{\"count\":8,\"one\":0},\"xmppErrorTotal\":{\"count\":85,\"one\":17},\"xmppIqReceived\":{\"count\":207,\"one\":87},\"xmppIqSent\":{\"count\":181,\"one\":80},\"xmppMessageBounced\":{\"count\":0,\"one\":0},\"xmppMessageReceived\":{\"count\":484,\"one\":311},\"xmppMessageSent\":{\"count\":340,\"one\":260},\"xmppPresenceReceived\":{\"count\":448,\"one\":56},\"xmppPresenceSent\":{\"count\":295,\"one\":44},\"xmppStanzaCount\":{\"count\":2596,\"one\":672},\"xmppStanzaDropped\":{\"count\":0,\"one\":0},\"xmppStanzaReceived\":{\"count\":1139,\"one\":454},\"xmppStanzaSent\":{\"count\":816,\"one\":384}}}">>,
                         {struct,
                          [{"metrics",
                            {struct,
                             [{"adhoc_local_commands",
                               {struct,[{"count",0},{"one",0}]}},
                              {"adhoc_local_items",
                               {struct,[{"count",0},{"one",0}]}},
                              {"amp_check_condition",
                               {struct,[{"count",0},{"one",0}]}},
                              {"amp_check_packet",
                               {struct,[{"count",816},{"one",384}]}},
                              {"amp_determine_strategy",
                               {struct,[{"count",0},{"one",0}]}},
                              {"amp_verify_support",
                               {struct,[{"count",0},{"one",0}]}},
                              {"anonymous_purge_hook",
                               {struct,[{"count",0},{"one",0}]}},
                              {"c2s_stream_features",
                               {struct,[{"count",589},{"one",91}]}},
                              {"c2s_unauthenticated_iq",
                               {struct,[{"count",142},{"one",25}]}},
                              {"disco_info",{struct,[{"count",3},{"one",0}]}},
                              {"disco_local_features",
                               {struct,[{"count",3},{"one",0}]}},
                              {"disco_local_identity",
                               {struct,[{"count",3},{"one",0}]}},
                              {"disco_local_items",
                               {struct,[{"count",5},{"one",0}]}},
                              {"disco_sm_features",
                               {struct,[{"count",0},{"one",0}]}},
                              {"disco_sm_identity",
                               {struct,[{"count",0},{"one",0}]}},
                              {"disco_sm_items",
                               {struct,[{"count",0},{"one",0}]}},
                              {"filter_local_packet",
                               {struct,[{"count",1443},{"one",619}]}},
                              {"get_key",{struct,[{"count",0},{"one",0}]}},
                              {"host_config_update",
                               {struct,[{"count",0},{"one",0}]}},
                              {"local_send_to_resource_hook",
                               {struct,[{"count",0},{"one",0}]}},
                              {"mam_archive_size",
                               {struct,[{"count",536},{"one",307}]}},
                              {"mam_get_behaviour",
                               {struct,[{"count",720},{"one",524}]}},
                              {"mam_lookup_messages",
                               {struct,[{"count",28},{"one",14}]}},
                              {"mam_muc_archive_size",
                               {struct,[{"count",15},{"one",3}]}},
                              {"mam_muc_get_behaviour",
                               {struct,[{"count",69},{"one",45}]}},
                              {"mam_muc_purge_multiple_message",
                               {struct,[{"count",0},{"one",0}]}},
                              {"mam_purge_multiple_message",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modCSIActive",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modCSIInactive",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMamArchiveRemoved",
                               {struct,[{"count",377},{"one",223}]}},
                              {"modMamArchived",
                               {struct,[{"count",1044},{"one",644}]}},
                              {"modMamDropped",
                               {struct,[{"count",1385},{"one",689}]}},
                              {"modMamDropped2",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMamDroppedIQ",
                               {struct,[{"count",28},{"one",14}]}},
                              {"modMamFlushed",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMamForwarded",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMamLookups",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMamLookups_simple",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMamMultiplePurges",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMamPrefsGets",
                               {struct,[{"count",21},{"one",21}]}},
                              {"modMamPrefsSets",
                               {struct,[{"count",42},{"one",42}]}},
                              {"modMamSinglePurges",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMucMamArchiveRemoved",
                               {struct,[{"count",91},{"one",3}]}},
                              {"modMucMamArchived",
                               {struct,[{"count",341},{"one",45}]}},
                              {"modMucMamForwarded",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMucMamLookups",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMucMamMultiplePurges",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMucMamPrefsGets",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMucMamPrefsSets",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modMucMamSinglePurges",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modPresenceSubscriptions",
                               {struct,[{"count",4},{"one",2}]}},
                              {"modPresenceUnsubscriptions",
                               {struct,[{"count",21},{"one",1}]}},
                              {"modPrivacyGets",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modPrivacyPush",
                               {struct,[{"count",21},{"one",7}]}},
                              {"modPrivacySets",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modPrivacySetsActive",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modPrivacySetsDefault",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modPrivacyStanzaAll",
                               {struct,[{"count",2533},{"one",929}]}},
                              {"modPrivacyStanzaBlocked",
                               {struct,[{"count",0},{"one",0}]}},
                              {"modRegisterCount",
                               {struct,[{"count",71},{"one",14}]}},
                              {"modRosterGets",
                               {struct,[{"count",7},{"one",0}]}},
                              {"modRosterPush",
                               {struct,[{"count",21},{"one",7}]}},
                              {"modRosterSets",
                               {struct,[{"count",5},{"one",0}]}},
                              {"modUnregisterCount",
                               {struct,[{"count",76},{"one",15}]}},
                              {"mod_http_notifications_failed",
                               {struct,[{"count",267},{"one",215}]}},
                              {"mod_http_notifications_response_time",
                               {struct,
                                [{"50",0},
                                 {"75",0},
                                 {"90",0},
                                 {"95",0},
                                 {"99",0},
                                 {"999",0},
                                 {"max",0},
                                 {"mean",0},
                                 {"median",0},
                                 {"min",0},
                                 {"n",0}]}},
                              {"mod_http_notifications_sent",
                               {struct,[{"count",0},{"one",0}]}},
                              {"offline_message_hook",
                               {struct,[{"count",1},{"one",1}]}},
                              {"privacy_get_user_list",
                               {struct,[{"count",293},{"one",42}]}},
                              {"privacy_updated_list",
                               {struct,[{"count",0},{"one",0}]}},
                              {"resend_offline_messages_hook",
                               {struct,[{"count",208},{"one",34}]}},
                              {"roster_get_jid_info",
                               {struct,[{"count",43},{"one",40}]}},
                              {"roster_get_subscription_lists",
                               {struct,[{"count",445},{"one",68}]}},
                              {"roster_get_versioning_feature",
                               {struct,[{"count",238},{"one",34}]}},
                              {"roster_in_subscription",
                               {struct,[{"count",52},{"one",7}]}},
                              {"roster_out_subscription",
                               {struct,[{"count",8},{"one",4}]}},
                              {"sessionAuthAnonymous",
                               {struct,[{"count",0},{"one",0}]}},
                              {"sessionAuthFails",
                               {struct,[{"count",6},{"one",0}]}},
                              {"sessionCount",
                               {struct,
                                [{"ms_since_reset",282121},{"value",0}]}},
                              {"sessionLogouts",
                               {struct,[{"count",237},{"one",36}]}},
                              {"sessionSuccessfulLogins",
                               {struct,[{"count",237},{"one",34}]}},
                              {"session_cleanup",
                               {struct,[{"count",0},{"one",0}]}},
                              {"set_vcard",{struct,[{"count",0},{"one",0}]}},
                              {"sm_broadcast",
                               {struct,[{"count",121},{"one",24}]}},
                              {"unset_presence_hook",
                               {struct,[{"count",209},{"one",36}]}},
                              {"user_ping_timeout",
                               {struct,[{"count",0},{"one",0}]}},
                              {"xmppErrorIq",
                               {struct,[{"count",73},{"one",17}]}},
                              {"xmppErrorMessage",
                               {struct,[{"count",4},{"one",0}]}},
                              {"xmppErrorPresence",
                               {struct,[{"count",8},{"one",0}]}},
                              {"xmppErrorTotal",
                               {struct,[{"count",85},{"one",17}]}},
                              {"xmppIqReceived",
                               {struct,[{"count",207},{"one",87}]}},
                              {"xmppIqSent",
                               {struct,[{"count",181},{"one",80}]}},
                              {"xmppMessageBounced",
                               {struct,[{"count",0},{"one",0}]}},
                              {"xmppMessageReceived",
                               {struct,[{"count",484},{"one",311}]}},
                              {"xmppMessageSent",
                               {struct,[{"count",340},{"one",260}]}},
                              {"xmppPresenceReceived",
                               {struct,[{"count",448},{"one",56}]}},
                              {"xmppPresenceSent",
                               {struct,[{"count",295},{"one",44}]}},
                              {"xmppStanzaCount",
                               {struct,[{"count",2596},{"one",672}]}},
                              {"xmppStanzaDropped",
                               {struct,[{"count",0},{"one",0}]}},
                              {"xmppStanzaReceived",
                               {struct,[{"count",1139},{"one",454}]}},
                              {"xmppStanzaSent",
                               {struct,[{"count",816},{"one",384}]}}]}}]}},
                        pass},
                       {<<"# 4b. Negative case for a non-existent host">>,
                        [{"example_global","nodeSessionCount"},
                         {"example_host","localhost"},
                         {"example_metric","adhoc_local_commands"},
                         {"hostname","localhost"},
                         {"port",5288},
                         {"protocol","http:"},
                         {"request_timeout",20000},
                         {"scenario_timeout",120000}],
                        {katt_request,"GET",
                         "http://localhost:5288/api/metrics/host/nonExistentHost",
                         [{"Accept","application/json"},
                          {"User-Agent","katt"},
                          {"Host","localhost:5288"}],
                         null},
                        {katt_response,404,
                         [{"Vary","accept"},
                          {"Content-Type","application/json"},
                          {"Content-Length","0"},
                          {"Date","Wed, 13 Apr 2016 09:33:10 GMT"},
                          {"Server","Cowboy"}],
                         <<>>,[]},
                        pass},
                       {<<"# 5a. An example metric for an example host\n">>,
                        [{"example_global","nodeSessionCount"},
                         {"example_host","localhost"},
                         {"example_metric","adhoc_local_commands"},
                         {"hostname","localhost"},
                         {"port",5288},
                         {"protocol","http:"},
                         {"request_timeout",20000},
                         {"scenario_timeout",120000}],
                        {katt_request,"GET",
                         "http://localhost:5288/api/metrics/host/localhost/adhoc_local_commands",
                         [{"Accept","application/json"},
                          {"User-Agent","katt"},
                          {"Host","localhost:5288"}],
                         null},
                        {katt_response,200,
                         [{"Vary","accept"},
                          {"Content-Type","application/json"},
                          {"Content-Length","30"},
                          {"Date","Wed, 13 Apr 2016 09:33:10 GMT"},
                          {"Server","Cowboy"}],
                         <<"{\"metric\":{\"count\":0,\"one\":0}}">>,
                         {struct,
                          [{"metric",{struct,[{"count",0},{"one",0}]}}]}},
                        pass},
                       {<<"# 5b. Negative case for a non-existent (host, metric) pair\n">>,
                        [{"example_global","nodeSessionCount"},
                         {"example_host","localhost"},
                         {"example_metric","adhoc_local_commands"},
                         {"hostname","localhost"},
                         {"port",5288},
                         {"protocol","http:"},
                         {"request_timeout",20000},
                         {"scenario_timeout",120000}],
                        {katt_request,"GET",
                         "http://localhost:5288/api/metrics/host/localhost/nonExistentMetric",
                         [{"Accept","application/json"},
                          {"User-Agent","katt"},
                          {"Host","localhost:5288"}],
                         null},
                        {katt_response,404,
                         [{"Vary","accept"},
                          {"Content-Type","application/json"},
                          {"Content-Length","0"},
                          {"Date","Wed, 13 Apr 2016 09:33:10 GMT"},
                          {"Server","Cowboy"}],
                         <<>>,[]},
                        pass},
                       {<<"# 6a. All global metric\n">>,
                        [{"example_global","nodeSessionCount"},
                         {"example_host","localhost"},
                         {"example_metric","adhoc_local_commands"},
                         {"hostname","localhost"},
                         {"port",5288},
                         {"protocol","http:"},
                         {"request_timeout",20000},
                         {"scenario_timeout",120000}],
                        {katt_request,"GET",
                         "http://localhost:5288/api/metrics/global",
                         [{"Accept","application/json"},
                          {"User-Agent","katt"},
                          {"Host","localhost:5288"}],
                         null},
                        {katt_response,200,
                         [{"Vary","accept"},
                          {"Content-Type","application/json"},
                          {"Content-Length","207"},
                          {"Date","Wed, 13 Apr 2016 09:33:10 GMT"},
                          {"Server","Cowboy"}],
                         <<"{\"metrics\":{\"nodeSessionCount\":{\"value\":0},\"nodeUpTime\":{\"value\":801},\"node_cleanup\":{\"count\":0,\"one\":0},\"routingErrors\":{\"count\":0,\"one\":0},\"totalSessionCount\":{\"value\":0},\"uniqueSessionCount\":{\"value\":0}}}">>,
                         {struct,
                          [{"metrics",
                            {struct,
                             [{"nodeSessionCount",{struct,[{"value",0}]}},
                              {"nodeUpTime",{struct,[{"value",801}]}},
                              {"node_cleanup",
                               {struct,[{"count",0},{"one",0}]}},
                              {"routingErrors",
                               {struct,[{"count",0},{"one",0}]}},
                              {"totalSessionCount",{struct,[{"value",0}]}},
                              {"uniqueSessionCount",
                               {struct,[{"value",0}]}}]}}]}},
                        pass},
                       {<<"# 6b. An example global metric\n">>,
                        [{"example_global","nodeSessionCount"},
                         {"example_host","localhost"},
                         {"example_metric","adhoc_local_commands"},
                         {"hostname","localhost"},
                         {"port",5288},
                         {"protocol","http:"},
                         {"request_timeout",20000},
                         {"scenario_timeout",120000}],
                        {katt_request,"GET",
                         "http://localhost:5288/api/metrics/global/nodeSessionCount",
                         [{"Accept","application/json"},
                          {"User-Agent","katt"},
                          {"Host","localhost:5288"}],
                         null},
                        {katt_response,200,
                         [{"Vary","accept"},
                          {"Content-Type","application/json"},
                          {"Content-Length","22"},
                          {"Date","Wed, 13 Apr 2016 09:33:10 GMT"},
                          {"Server","Cowboy"}],
                         <<"{\"metric\":{\"value\":0}}">>,
                         {struct,[{"metric",{struct,[{"value",0}]}}]}},
                        pass}]}
</pre>
<center>
<br /><hr /><p>
<a href="../../../all_runs.html">Test run history
</a>  |  <a href="../../../index.html">Top level test index
</a>
</p>
<div class="copyright">Copyright &copy; 2016 <a href="http://www.erlang.org">Open Telecom Platform</a><br />
Updated: <!date>Wed Apr 13 2016 09:33:10<!/date><br />
</div>
</center>
</body>
</html>
